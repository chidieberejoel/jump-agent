<div class="mx-auto max-w-4xl">
  <.header>
    Welcome to your Dashboard
    <:subtitle>
      Hello, <%= @current_user.name || @current_user.email %>!
    </:subtitle>
    <:actions>
      <.link
        navigate={~p"/chat"}
        class="rounded-md bg-brand px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-brand/90 inline-flex items-center gap-2"
      >
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path>
        </svg>
        Open AI Assistant
      </.link>
    </:actions>
  </.header>

  <div class="mt-8 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
    <!-- AI Assistant Card -->
    <div class="bg-white overflow-hidden shadow rounded-lg">
        <div class="px-4 py-5 sm:p-6">
          <div class="flex items-center">
            <div class="flex-shrink-0">
              <svg class="h-8 w-8 text-purple-600" fill="currentColor" viewBox="0 0 24 24">
                <path d="M21.928 11.607c-.202-.488-.635-.605-.928-.633V8c0-1.103-.897-2-2-2h-6V4.61c.305-.274.5-.668.5-1.11a1.5 1.5 0 0 0-3 0c0 .442.195.836.5 1.11V6H5c-1.103 0-2 .897-2 2v2.997l-.082.006A1 1 0 0 0 1.99 12v2a1 1 0 0 0 1 1H3v5c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5a1 1 0 0 0 1-1v-1.938a1.006 1.006 0 0 0-.072-.455zM5 20V8h14l.001 3.996L19 12v2l.001.005.001 5.995H5z"/>
                <ellipse cx="8.5" cy="12" rx="1.5" ry="2"/>
                <ellipse cx="15.5" cy="12" rx="1.5" ry="2"/>
                <path d="M8 16h8v2H8z"/>
              </svg>
            </div>
            <div class="ml-5 w-0 flex-1">
              <dl>
                <dt class="text-sm font-medium text-gray-500 truncate">
                  AI Assistant
                </dt>
                <dd>
                  <div class="text-lg font-medium text-gray-900">
                    Ask me anything
                  </div>
                </dd>
              </dl>
            </div>
          </div>
          <div class="mt-5 flex gap-2">
            <.link
              navigate={~p"/chat"}
              class="inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500"
            >
              Open Chat
            </.link>
            <.link
              navigate={~p"/instructions"}
              class="inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand"
            >
              Instructions
            </.link>
          </div>
        </div>
    </div>
    <div class="bg-white shadow overflow-hidden sm:rounded-lg">
      <div class="px-4 py-5 sm:px-6">
        <h3 class="text-lg leading-6 font-medium text-gray-900">
          User Information
        </h3>
        <p class="mt-1 max-w-2xl text-sm text-gray-500">
          Your Google account details
        </p>
      </div>
      <div class="border-t border-gray-200">
        <dl>
          <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
            <dt class="text-sm font-medium text-gray-500">
              Full name
            </dt>
            <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
              <%= @current_user.name || "Not provided" %>
            </dd>
          </div>
          <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
            <dt class="text-sm font-medium text-gray-500">
              Email address
            </dt>
            <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
              <%= @current_user.email %>
            </dd>
          </div>
          <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
            <dt class="text-sm font-medium text-gray-500">
              Google ID
            </dt>
            <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
              <%= @current_user.google_id %>
            </dd>
          </div>
          <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
            <dt class="text-sm font-medium text-gray-500">
              Profile Picture
            </dt>
            <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
              <%= if @current_user.avatar_url do %>
                <img src={@current_user.avatar_url} alt="Profile" class="h-20 w-20 rounded-full">
              <% else %>
                <span class="text-gray-400">No profile picture</span>
              <% end %>
            </dd>
          </div>
          <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
            <dt class="text-sm font-medium text-gray-500">
              Member since
            </dt>
            <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
              <%= Calendar.strftime(@current_user.inserted_at, "%B %d, %Y") %>
            </dd>
          </div>
        </dl>
      </div>
    </div>

    <div class="mt-8">
      <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">
        Google Services Access
      </h3>
      <div class="bg-white shadow overflow-hidden sm:rounded-lg">
        <div class="px-4 py-5 sm:px-6">
          <p class="text-sm text-gray-500">
            You have granted access to the following Google services:
          </p>
          <ul class="mt-3 list-disc list-inside text-sm text-gray-600">
            <li>Email (Read/Write access)</li>
            <li>Calendar (Read/Write access)</li>
            <li>Basic profile information</li>
          </ul>
          <div class="mt-4">
            <.link
              navigate={~p"/dashboard/live"}
              class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
            >
              View Live Dashboard
            </.link>
          </div>
        </div>
      </div>
    </div>

    <div class="mt-8">
      <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">
        Connected Services
      </h3>
      <div class="bg-white shadow overflow-hidden sm:rounded-lg">
        <div class="px-4 py-5 sm:px-6">
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <div class="flex-shrink-0">
                <svg class="h-8 w-8 text-orange-500" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M21.56 8.74l-4.24-1.13c.3-1.02.48-2.11.48-3.24C17.8 1.96 15.84 0 13.43 0c-1.57 0-2.95.84-3.71 2.09A7.96 7.96 0 006.2 0C3.49 0 1.29 2.2 1.29 4.91c0 .42.05.83.15 1.22L.24 6.43C.09 6.47 0 6.61 0 6.77v3.46c0 .16.09.3.24.34l1.45.38v2.28c0 .16.09.3.24.34l1.45.38v2.28c0 .16.09.3.24.34l4.96 1.32c.05.01.1.02.16.01.11 0 .21-.06.27-.16.08-.14.04-.32-.1-.41l-.94-.63c-.07-.05-.12-.12-.14-.2l-1.34-5.04 2.8.74c.05.01.1.02.16.01.11 0 .21-.06.27-.16.08-.14.04-.32-.1-.41l-.94-.63c-.07-.05-.12-.12-.14-.2L7.24 6.18c.69.41 1.49.65 2.35.65 1.57 0 2.95-.84 3.71-2.09.76 1.25 2.14 2.09 3.71 2.09.73 0 1.41-.19 2.01-.51v3.11l-1.04 4c-.02.08-.07.15-.14.2l-.94.63c-.14.09-.18.27-.1.41.06.1.16.16.27.16.06 0 .11 0 .16-.01l4.96-1.32c.15-.04.24-.18.24-.34V9.08c0-.16-.09-.3-.24-.34z"/>
                </svg>
              </div>
              <div class="ml-4">
                <p class="text-sm font-medium text-gray-900">HubSpot CRM</p>
                <%= if @hubspot_connection do %>
                  <p class="text-sm text-gray-500">Connected to Portal ID: <%= @hubspot_connection.portal_id %></p>
                <% else %>
                  <p class="text-sm text-gray-500">Not connected</p>
                <% end %>
              </div>
            </div>
            <%= if @hubspot_connection do %>
              <.link
                href={~p"/hubspot/disconnect"}
                method="delete"
                data-confirm="Are you sure you want to disconnect your HubSpot account?"
                class="inline-flex items-center px-3 py-1.5 border border-red-300 text-xs font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"
              >
                Disconnect
              </.link>
            <% else %>
              <.link
                href={~p"/hubspot/connect"}
                class="inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500"
              >
                Connect HubSpot
              </.link>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
